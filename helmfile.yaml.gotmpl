environments:
  default:
    values:
      - ./env.yaml

  dev:
    values:
      - ./env.localProd.yaml

---

releases:
  - name: dependencies
    chart: ./helm/dependencies
    values:
      - ./helm/dependencies/values.yaml
    set:
      - name: redis.auth.password
        value: "{{ .Environment.Values.redis.password }}"

      - name: postgresql.auth.user
        value: "{{ .Environment.Values.postgresql.user }}"

      - name: postgresql.auth.password
        value: "{{ .Environment.Values.postgresql.password }}"

      - name: postgresql.auth.postgresPassword
        value: "{{ .Environment.Values.postgresql.suPassword }}"

      - name: postgresql.auth.replicationPassword
        value: "{{ .Environment.Values.postgresql.replicationPassword }}"

      - name: rabbitmq.auth.username
        value: "{{ .Environment.Values.rabbitmq.username }}"

      - name: rabbitmq.auth.password
        value: "{{ .Environment.Values.rabbitmq.password }}"

  - name: dayguard-core
    chart: ./helm/dayguard-core
    values:
      - ./helm/dayguard-core/values.yaml
    set:
      - name: redis.auth.password
        value: "{{ .Environment.Values.redis.password}}"

      - name: postgresql.auth.user
        value: "{{ .Environment.Values.postgresql.user }}"

      - name: postgresql.auth.password
        value: "{{ .Environment.Values.postgresql.password }}"

      - name: rabbitmq.auth.username
        value: "{{ .Environment.Values.rabbitmq.username }}"

      - name: rabbitmq.auth.password
        value: "{{ .Environment.Values.rabbitmq.password }}"